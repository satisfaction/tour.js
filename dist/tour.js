!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Tour=e()}(this,function(){function t(t,e){return function(){return t.apply(e,arguments)}}function e(t){var e,n,i,s,o,r,d;o=(new Date).getTime(),i=document.createElementNS(m,"defs"),s=document.createElementNS(m,"filter"),s.setAttributeNS(null,"id",o),s.setAttributeNS(null,"x","-50%"),s.setAttributeNS(null,"y","-50%"),s.setAttributeNS(null,"width","200%"),s.setAttributeNS(null,"height","200%"),d=document.createElementNS(m,"feOffset"),d.setAttributeNS(null,"dx",1),d.setAttributeNS(null,"dy",1),d.setAttributeNS(null,"in","SourceAlpha"),d.setAttributeNS(null,"result","ShadowOffsetOuter"),n=document.createElementNS(m,"feGaussianBlur"),n.setAttributeNS(null,"stdDeviation",2),n.setAttributeNS(null,"in","ShadowOffsetOuter"),n.setAttributeNS(null,"result","ShadowBlurOuter"),r=document.createElementNS(m,"feColorMatrix"),r.setAttributeNS(null,"values","0 0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 0.3 0"),r.setAttributeNS(null,"in","ShadowBlurOuter"),r.setAttributeNS(null,"result","ShadowMatrixOuter"),e=document.createElementNS(m,"feBlend"),e.setAttributeNS(null,"in","ShadowMatrixOuter"),e.setAttributeNS(null,"in2","SourceGraphic"),e.setAttributeNS(null,"mode","normal"),s.appendChild(d),s.appendChild(n),s.appendChild(r),s.appendChild(e),i.appendChild(s),t.appendChild(i),t.setAttribute("style","filter: url(#"+o+");")}function n(t){var e,n,i,s,o;(t.previous||t.next)&&(s=document.createElement("div"),s.className="tourjs-pagination",t.next&&(n=document.createElement("a"),n.className="tourjs-next-step",n.setAttribute("href","#"),n.addEventListener("click",function(e){e.stopPropagation(),t.close(),t.next.render(),t.next.render()}),e=document.createElement("span"),e.innerText="Next",n.appendChild(e),i=a("#tutjs-chevron-ltr g"),n.appendChild(i),s.appendChild(n)),t.previous&&(o=document.createElement("a"),o.className="tourjs-previous-step",o.setAttribute("href","#"),o.addEventListener("click",function(e){e.stopPropagation(),t.close(),t.previous.render(),t.previous.render()}),previousChevron=a("#tutjs-chevron-rtl g",{transform:"translate(-10)"}),o.appendChild(previousChevron),e=document.createElement("span"),e.innerText="Previous",o.appendChild(e),s.appendChild(o)),t.node.appendChild(s))}function i(){return"tourjs-"+g++}function s(t){function e(){4==n.readyState&&200==n.status&&(f=document.createElement("div"),f.innerHTML=n.responseText,t.success&&t.success())}var n=new XMLHttpRequest;n.onreadystatechange=e,n.open("GET",t.svg||"dist/tour.js.svg",!0),n.send()}function o(t){var e=t.getBoundingClientRect(),n=r();return e.right=n.width-e.right,e.bottom=n.height-e.bottom,e}function r(){var t=document.documentElement;return{width:window.innerWidth||t.clientWidth,height:window.innerHeight||t.clientHeight}}function d(t){var e={};switch(t){case"top-left":e.transform="translate(11 -12) rotate(45)";break;case"top":e.transform="translate(32) rotate(90)";break;case"top-right":e.transform="translate(60 12) rotate(135)";break;case"right":e.transform="translate(63 32) rotate(180)";break;case"bottom-right":e.transform="translate(33 60) rotate(-135)";break;case"bottom":e.transform="translate(0 64) rotate(-90)";break;case"bottom-left":e.transform="translate(-11 38) rotate(-45)";break;case"left":}return a("#tutjs-arrow g",e)}function h(){var t;document.getElementById(c)||(t=document.createElement("div"),t.id=c,document.body.appendChild(t)),document.getElementById(c).style.display="block"}function a(t,n){var i,s;return n=n||{},s=f.querySelector(t).cloneNode(!0),n.transform&&s.setAttribute("transform",n.transform),i=document.createElementNS(m,"svg"),i.setAttribute("class","tourjs-shape"),e(i),i.appendChild(s),i}function l(e){return this instanceof l?(this.id=i(),this.options=e||{},void(this._setPosition=t(this._setPosition,this))):new l(e)}function u(t){return this instanceof u?(this.id=i(),this.options=t.options||{},this.hints=[],void t.hints.forEach(function(t){this.hints.push(new l(t))}.bind(this))):new u(t)}function p(t){var e,n;return this instanceof p?(this.id=i(),this.options=t.options||{},this.steps=[],void t.steps.forEach(function(t){e=new u(t),n&&(e.previous=n,n.next=e),this.steps.push(e),n=e}.bind(this))):new p(t)}var c,f,m,g;return g=0,c="tourjs-overlay",m="http://www.w3.org/2000/svg",l.prototype={render:function(){return this.node||(this.node=document.createElement("div"),this.node.id=this.id,this._renderTooltip(),this._renderShape()),this.node.className="tourjs-hint",this.node.classList.add("tourjs-"+this.options.position),this.node.classList.add("tourjs-"+this.options.type),window.addEventListener("resize",this._setPosition),this.options.highlight===!0&&document.querySelector(this.options.target).classList.add("tourjs-highlight"),this._setPosition(),this.node},close:function(){this.options.highlight&&document.querySelector(this.options.target).classList.remove("tourjs-highlight"),window.removeEventListener("resize",this._setPosition)},_setPosition:function(){var t=5,e=o(document.querySelector(this.options.target)),n=o(this.node);switch(this.options.position){case"top-left":this.node.style.top=e.top-n.height-t+"px",this.node.style.left=e.left-n.width-t+"px";break;case"top":this.node.style.top=e.top-n.height-t+"px",this.node.style.left=e.left+e.width/2-n.width/2+"px";break;case"top-right":this.node.style.top=e.top-n.height-t+"px",this.node.style.left=e.left+e.width+5+"px";break;case"right":this.node.style.top=e.height>n.height?e.top+(e.height-n.height)/2+"px":e.top-(n.height-e.height)/2+"px",this.node.style.left=e.left+e.width+t+"px";break;case"bottom-right":this.node.style.top=e.bottom+t+"px",this.node.style.left=e.left+e.width+t+"px";break;case"bottom":this.node.style.top=e.bottom+t+"px",this.node.style.left=e.left+e.width/2-n.width/2+"px";break;case"bottom-left":this.node.style.top=e.bottom+t+"px",this.node.style.left=e.left-n.width-t+"px";break;case"left":this.node.style.top=e.height>n.height?e.top+(e.height-n.height)/2+"px":e.top-(n.height-e.height)/2+"px",this.node.style.left=e.left-n.width-t+"px"}},_renderDescription:function(t){var e;this.options.description&&(e=document.createElement("div"),e.className="tourjs-description",e.innerHTML=this.options.description,t.appendChild(e))},_renderShape:function(){var t=d(this.options.position);this.node.appendChild(t)},_renderTitle:function(t){var e=document.createElement("h2");e.innerText=this.options.title,t.appendChild(e)},_renderTooltip:function(){var t=document.createElement("div");t.className="tourjs-tooltip",this._renderTitle(t),this._renderDescription(t),this.node.appendChild(t)}},u.prototype={render:function(t){var e=function(){this.node?this.node.style.display="block":(this.node=document.createElement("div"),this.node.id=this.id,n(this)),this.hints.forEach(function(t){t.render(),this.node.appendChild(t.node)}.bind(this)),this.node.className="tourjs-step",document.getElementById(this.id)||document.body.appendChild(this.node),t&&t(this)}.bind(this);"function"==typeof this.options.before?this.options.before(e):e(),"function"==typeof this.options.after&&this.options.after()},close:function(){this.node.style.display="none",this.hints.forEach(function(t){t.close()})}},p.prototype={render:function(){return this.node||(this.node=document.createElement("div"),this.node.id=this.id,this._frag=document.createDocumentFragment(),this._frag.appendChild(this.node)),this.node.className="tourjs",h(),s({svg:this.options.svg,success:function(){this._renderStep(0),document.getElementById(this.id)||document.body.appendChild(this._frag)}.bind(this)}),this.node},_renderStep:function(t){var e=this.steps[t];e.render(function(t){this.node.appendChild(t.node)}.bind(this))}},p});